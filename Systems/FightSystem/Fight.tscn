[gd_scene load_steps=28 format=4 uid="uid://un01f78supte"]

[ext_resource type="Script" uid="uid://bab2lls1yolqc" path="res://Systems/FightSystem/Scripts/FightManager.gd" id="1_4n6yy"]
[ext_resource type="Script" uid="uid://dp7jxpflinrii" path="res://Systems/FightSystem/Scripts/TurnOrder.gd" id="2_0ff21"]
[ext_resource type="PackedScene" uid="uid://cocuah8dgswb3" path="res://Systems/FightSystem/Prefabs/TurnOrderIcon.tscn" id="2_a67i2"]
[ext_resource type="Script" uid="uid://c8ayfyaxhr76x" path="res://Systems/FightSystem/Scripts/FightMenu.gd" id="3_70rx3"]
[ext_resource type="PackedScene" uid="uid://2vbqcmried47" path="res://Prefabs/KeyComboUI.tscn" id="4_0sxkw"]
[ext_resource type="Theme" uid="uid://dyn2de25dn40h" path="res://Assets/UI_Theme.tres" id="4_70rx3"]
[ext_resource type="PackedScene" uid="uid://br038cjsx7k78" path="res://Systems/FightSystem/Prefabs/balloon.tscn" id="4_a67i2"]
[ext_resource type="Script" uid="uid://dbc83lq0uf6xs" path="res://Systems/FightSystem/Scripts/CharacterList.gd" id="5_7np0b"]
[ext_resource type="Script" uid="uid://hbakf3m5lo4v" path="res://Systems/FightSystem/Scripts/EnemySelector.gd" id="5_c7kuk"]
[ext_resource type="Script" uid="uid://b5286saishs7x" path="res://Systems/FightSystem/Scripts/AbilityList.gd" id="6_h4a4a"]
[ext_resource type="PackedScene" uid="uid://b4hpjfycitkn8" path="res://Prefabs/Character.tscn" id="7_q8rm7"]
[ext_resource type="Script" uid="uid://bolymwf31wy6o" path="res://Scripts/AbilityStats.gd" id="8_gx5c0"]
[ext_resource type="Texture2D" uid="uid://tc06bvi34jtt" path="res://Assets/Icons/SwordIcon.png" id="9_jposd"]
[ext_resource type="Texture2D" uid="uid://cg5qei72acokg" path="res://Assets/Icons/HeartIcon.png" id="10_gx5c0"]
[ext_resource type="TileSet" uid="uid://g1fgtahkxoh" path="res://Assets/Tiles/tiles_set.tres" id="11_0ff21"]
[ext_resource type="Script" uid="uid://hp8vy6m6k1gq" path="res://Scripts/CharacterStats.gd" id="11_c7kuk"]
[ext_resource type="Texture2D" uid="uid://bmq5o63pubm8o" path="res://Assets/Sprites/AngleAI_Icon.png" id="12_c7kuk"]

[sub_resource type="Gradient" id="Gradient_0ff21"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.24561404, 0.9305556)
colors = PackedColorArray(0.047000002, 0.06819999, 0.1, 1, 0.476247, 0.58466333, 0.67320734, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_kikd7"]
gradient = SubResource("Gradient_0ff21")

[sub_resource type="Resource" id="Resource_kikd7"]
script = ExtResource("11_c7kuk")
name = "Jano"
icon = ExtResource("12_c7kuk")
metadata/_custom_type_script = "uid://hp8vy6m6k1gq"

[sub_resource type="Resource" id="Resource_arq58"]
script = ExtResource("8_gx5c0")
name = "Slash"
icon = ExtResource("9_jposd")
damage = 5
metadata/_custom_type_script = "uid://bolymwf31wy6o"

[sub_resource type="Resource" id="Resource_w723q"]
script = ExtResource("11_c7kuk")
name = "Dano"
icon = ExtResource("12_c7kuk")
metadata/_custom_type_script = "uid://hp8vy6m6k1gq"

[sub_resource type="Resource" id="Resource_jjms2"]
script = ExtResource("8_gx5c0")
name = "SMASH"
icon = ExtResource("9_jposd")
damage = 4
damage_type = 2
metadata/_custom_type_script = "uid://bolymwf31wy6o"

[sub_resource type="Resource" id="Resource_c7kuk"]
script = ExtResource("11_c7kuk")
name = "Enemy1"
icon = ExtResource("12_c7kuk")
armorReduction = 3
metadata/_custom_type_script = "uid://hp8vy6m6k1gq"

[sub_resource type="Resource" id="Resource_jposd"]
script = ExtResource("8_gx5c0")
icon = ExtResource("10_gx5c0")
damage_type = 2
metadata/_custom_type_script = "uid://bolymwf31wy6o"

[sub_resource type="Resource" id="Resource_0ff21"]
script = ExtResource("11_c7kuk")
name = "Enemy2"
icon = ExtResource("12_c7kuk")
metadata/_custom_type_script = "uid://hp8vy6m6k1gq"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_0ff21"]
bg_color = Color(0.14, 0.14, 0.14, 1)

[node name="Fight" type="CanvasLayer" node_paths=PackedStringArray("friendly", "enemies")]
script = ExtResource("1_4n6yy")
frienlyColor = Color(0.76550007, 1, 0.32999998, 1)
enemyColor = Color(1, 0.32333338, 0.3, 1)
friendly = [NodePath("Player"), NodePath("Player2")]
enemies = [NodePath("Enemy"), NodePath("Enemy2")]

[node name="bg" type="Sprite2D" parent="."]
position = Vector2(384.31415, 249.98807)
rotation = -1.3089969
scale = Vector2(4.1831183, 994.6487)
texture = SubResource("GradientTexture1D_kikd7")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
position = Vector2(144, 224)
tile_map_data = PackedByteArray("AAAEAPH/AAAEAAAAAAAEAPL/AAAEAAAAAAAEAPP/AAAEAAAAAAAEAPT/AAAEAAAAAAAEAPX/AAAEAAAAAAAEAPb/AAAEAAAAAAAEAPf/AAAEAAAAAAAEAPj/AAAEAAAAAAAEAPn/AAAEAAAAAAAEAPr/AAAEAAAAAAAEAPv/AAAEAAAAAAAEAPz/AAAEAAAAAAAEAP3/AAAEAAAAAAAEAP7/AAAEAAAAAAAEAP//AAAEAAAAAAAEAAAAAAAEAAAAAAAEAAEAAAAEAAAAAAAEAAIAAAAEAAAAAAAEAAMAAAAEAAAAAAAEAAQAAAAEAAAAAAAEAAUAAAAEAAAAAAAEAAYAAAAEAAAAAAAFAPH/AAADAAAAAAAFAPL/AAADAAAAAAAFAPP/AAADAAAAAAAFAPT/AAADAAAAAAAFAPX/AAADAAAAAAAFAPb/AAADAAAAAAAFAPf/AAADAAAAAAAFAPj/AAADAAAAAAAFAPn/AAADAAAAAAAFAPr/AAADAAAAAAAFAPv/AAADAAAAAAAFAPz/AAADAAAAAAAFAP3/AAADAAAAAAAFAP7/AAADAAAAAAAFAP//AAADAAAAAAAFAAAAAAADAAAAAAAFAAEAAAADAAAAAAAFAAIAAAADAAAAAAAFAAMAAAADAAAAAAAFAAQAAAADAAAAAAAFAAUAAAADAAAAAAAFAAYAAAADAAAAAAAGAPH/AAAAAAIAAAAGAPL/AAAAAAIAAAAGAPP/AAAAAAIAAAAGAPT/AAAAAAIAAAAGAPX/AAAAAAIAAAAGAPb/AAAAAAIAAAAGAPf/AAAAAAIAAAAGAPj/AAAAAAIAAAAGAPn/AAAAAAIAAAAGAPr/AAAAAAIAAAAGAPv/AAAAAAIAAAAGAPz/AAAAAAIAAAAGAP3/AAAAAAIAAAAGAP7/AAAAAAIAAAAGAP//AAAAAAIAAAAGAAAAAAAAAAIAAAAGAAEAAAAAAAIAAAAGAAIAAAAAAAIAAAAGAAMAAAAAAAIAAAAGAAQAAAAAAAIAAAAGAAUAAAAAAAIAAAAGAAYAAAAAAAIAAAAHAPH/AQADAAIAAAAHAPL/AQABAAQAAAAHAPP/AQABAAQAAAAHAPT/AQADAAIAAAAHAPX/AQADAAIAAAAHAPb/AQAAAAQAAAAHAPf/AQABAAQAAAAHAPj/AQADAAIAAAAHAPn/AQADAAIAAAAHAPr/AQADAAIAAAAHAPv/AQACAAIAAAAHAPz/AQABAAQAAAAHAP3/AQAAAAQAAAAHAP7/AQABAAQAAAAHAP//AQADAAIAAAAHAAAAAQABAAQAAAAHAAEAAQADAAIAAAAHAAIAAQABAAQAAAAHAAMAAQABAAQAAAAHAAQAAQABAAQAAAAHAAUAAQACAAIAAAAHAAYAAQABAAQAAAAIAPH/AQAAAAQAAAAIAPL/AQADAAIAAAAIAPP/AQADAAIAAAAIAPT/AQACAAIAAAAIAPX/AQADAAIAAAAIAPb/AQADAAIAAAAIAPf/AQABAAQAAAAIAPj/AQABAAQAAAAIAPn/AQAAAAQAAAAIAPr/AQABAAQAAAAIAPv/AQACAAIAAAAIAPz/AQADAAIAAAAIAP3/AQADAAIAAAAIAP7/AQAAAAQAAAAIAP//AQAAAAQAAAAIAAAAAQADAAIAAAAIAAEAAQADAAIAAAAIAAIAAQAAAAQAAAAIAAMAAQABAAQAAAAIAAQAAQABAAQAAAAIAAUAAQABAAQAAAAIAAYAAQACAAIAAAACAPH/AQAAAAQAAAACAPL/AQACAAIAAAACAPP/AQADAAIAAAACAPT/AQAAAAQAAAACAPX/AQADAAIAAAACAPb/AQACAAIAAAACAPf/AQADAAIAAAACAPj/AQABAAQAAAACAPn/AQADAAIAAAACAPr/AQAAAAQAAAACAPv/AQAAAAQAAAACAPz/AQADAAIAAAACAP3/AQADAAIAAAACAP7/AQACAAIAAAACAP//AQADAAIAAAACAAAAAQADAAIAAAACAAEAAQACAAIAAAACAAIAAQABAAQAAAACAAMAAQAAAAQAAAACAAQAAQAAAAQAAAACAAUAAQAAAAQAAAACAAYAAQABAAQAAAADAPX/AQADAAIAAAADAPb/AQACAAIAAAADAPf/AQADAAIAAAADAPj/AQABAAQAAAADAPn/AQACAAIAAAADAPr/AQABAAQAAAADAPv/AQADAAIAAAADAPz/AQACAAIAAAADAP3/AQAAAAQAAAADAP7/AQACAAIAAAADAP//AQACAAIAAAADAAAAAQABAAQAAAADAAEAAQADAAIAAAADAAIAAQABAAQAAAADAAMAAQADAAIAAAADAAQAAQABAAQAAAADAAUAAQAAAAQAAAADAPH/AQABAAQAAAADAPL/AQACAAIAAAADAPP/AQABAAQAAAADAPT/AQABAAQAAAADAAYAAQACAAIAAAA=")
tile_set = ExtResource("11_0ff21")

[node name="TileMapLayer_walls" type="TileMapLayer" parent="."]
position = Vector2(144, 224)
tile_map_data = PackedByteArray("AAAEAPH/AAAEAAAAAAAEAPL/AAAEAAAAAAAEAPP/AAAEAAAAAAAEAPT/AAAEAAAAAAAEAPX/AAAEAAAAAAAEAPb/AAAEAAAAAAAEAPf/AAAEAAAAAAAEAPj/AAAEAAAAAAAEAPn/AAAEAAAAAAAEAPr/AAAEAAAAAAAEAPv/AAAEAAAAAAAEAPz/AAAEAAAAAAAEAP3/AAAEAAAAAAAEAP7/AAAEAAAAAAAEAP//AAAEAAAAAAAEAAAAAAAEAAAAAAAEAAEAAAAEAAAAAAAEAAIAAAAEAAAAAAAEAAMAAAAEAAAAAAAEAAQAAAAEAAAAAAAEAAUAAAAEAAAAAAAEAAYAAAAEAAAAAAAFAPH/AAADAAAAAAAFAPL/AAADAAAAAAAFAPP/AAADAAAAAAAFAPT/AAADAAAAAAAFAPX/AAADAAAAAAAFAPb/AAADAAAAAAAFAPf/AAADAAAAAAAFAPj/AAADAAAAAAAFAPn/AAADAAAAAAAFAPr/AAADAAAAAAAFAPv/AAADAAAAAAAFAPz/AAADAAAAAAAFAP3/AAADAAAAAAAFAP7/AAADAAAAAAAFAP//AAADAAAAAAAFAAAAAAADAAAAAAAFAAEAAAADAAAAAAAFAAIAAAADAAAAAAAFAAMAAAADAAAAAAAFAAQAAAADAAAAAAAFAAUAAAADAAAAAAAFAAYAAAADAAAAAAAGAPH/AAAAAAIAAAAGAPL/AAAAAAIAAAAGAPP/AAAAAAIAAAAGAPT/AAAAAAIAAAAGAPX/AAAAAAIAAAAGAPb/AAAAAAIAAAAGAPf/AAAAAAIAAAAGAPj/AAAAAAIAAAAGAPn/AAAAAAIAAAAGAPr/AAAAAAIAAAAGAPv/AAAAAAIAAAAGAPz/AAAAAAIAAAAGAP3/AAAAAAIAAAAGAP7/AAAAAAIAAAAGAP//AAAAAAIAAAAGAAAAAAAAAAIAAAAGAAEAAAAAAAIAAAAGAAIAAAAAAAIAAAAGAAMAAAAAAAIAAAAGAAQAAAAAAAIAAAAGAAUAAAAAAAIAAAAGAAYAAAAAAAIAAAAHAPH/AQADAAIAAAAHAPL/AQABAAQAAAAHAPP/AQABAAQAAAAHAPT/AQADAAIAAAAHAPX/AQADAAIAAAAHAPb/AQAAAAQAAAAHAPf/AQABAAQAAAAHAPj/AQADAAIAAAAHAPn/AQADAAIAAAAHAPr/AQADAAIAAAAHAPv/AQACAAIAAAAHAPz/AQABAAQAAAAHAP3/AQAAAAQAAAAHAP7/AQABAAQAAAAHAP//AQADAAIAAAAHAAAAAQABAAQAAAAHAAEAAQADAAIAAAAHAAIAAQABAAQAAAAHAAMAAQABAAQAAAAHAAQAAQABAAQAAAAHAAUAAQACAAIAAAAHAAYAAQABAAQAAAAIAPH/AQAAAAQAAAAIAPL/AQADAAIAAAAIAPP/AQADAAIAAAAIAPT/AQACAAIAAAAIAPX/AQADAAIAAAAIAPb/AQADAAIAAAAIAPf/AQABAAQAAAAIAPj/AQABAAQAAAAIAPn/AQAAAAQAAAAIAPr/AQABAAQAAAAIAPv/AQACAAIAAAAIAPz/AQADAAIAAAAIAP3/AQADAAIAAAAIAP7/AQAAAAQAAAAIAP//AQAAAAQAAAAIAAAAAQADAAIAAAAIAAEAAQADAAIAAAAIAAIAAQAAAAQAAAAIAAMAAQABAAQAAAAIAAQAAQABAAQAAAAIAAUAAQABAAQAAAAIAAYAAQACAAIAAAACAPH/AgAAAAAAAAACAPL/AgAAAAAAAAACAPP/AgAAAAAAAAACAPT/AgAAAAAAAAACAPX/AgAAAAAAAAACAPb/AgAAAAAAAAACAPf/AgAAAAAAAAACAPj/AgAAAAAAAAACAPn/AgAAAAAAAAACAPr/AgAAAAAAAAACAPv/AgAAAAAAAAACAPz/AgAAAAAAAAACAP3/AgAAAAAAAAACAP7/AgAAAAAAAAACAP//AgAAAAAAAAACAAAAAgAAAAAAAAACAAEAAgAAAAAAAAACAAIAAgAAAAAAAAACAAMAAgAAAAAAAAACAAQAAgAAAAAAAAACAAUAAgAAAAAAAAACAAYAAgAAAAAAAAADAPX/AQADAAIAAAADAPb/AQACAAIAAAADAPf/AQADAAIAAAADAPj/AQABAAQAAAADAPn/AQACAAIAAAADAPr/AQABAAQAAAADAPv/AQADAAIAAAADAPz/AQACAAIAAAADAP3/AQAAAAQAAAADAP7/AQACAAIAAAADAP//AQACAAIAAAADAAAAAQABAAQAAAADAAEAAQADAAIAAAADAAIAAQABAAQAAAADAAMAAQADAAIAAAADAAQAAQABAAQAAAADAAUAAQAAAAQAAAADAPH/AQABAAQAAAADAPL/AQACAAIAAAADAPP/AQABAAQAAAADAPT/AQABAAQAAAADAAYAAQACAAIAAAA=")
tile_set = ExtResource("11_0ff21")

[node name="Player" parent="." instance=ExtResource("7_q8rm7")]
position = Vector2(192, 272)
stats = SubResource("Resource_kikd7")
abilities = Array[ExtResource("8_gx5c0")]([SubResource("Resource_arq58")])

[node name="Player2" parent="." instance=ExtResource("7_q8rm7")]
position = Vector2(217, 288)
stats = SubResource("Resource_w723q")
abilities = Array[ExtResource("8_gx5c0")]([SubResource("Resource_jjms2")])

[node name="Enemy" parent="." instance=ExtResource("7_q8rm7")]
position = Vector2(432, 176)
rotation = -3.1415927
scale = Vector2(1, -1)
stats = SubResource("Resource_c7kuk")
abilities = Array[ExtResource("8_gx5c0")]([SubResource("Resource_jposd")])

[node name="Enemy2" parent="." instance=ExtResource("7_q8rm7")]
position = Vector2(400, 160)
rotation = -3.1415927
scale = Vector2(1, -1)
stats = SubResource("Resource_0ff21")
abilities = Array[ExtResource("8_gx5c0")]([SubResource("Resource_jposd")])

[node name="FightUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="TurnOrder" type="Panel" parent="FightUI"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_left = -1.0
offset_right = -1.0
offset_bottom = 64.0
grow_horizontal = 2

[node name="IconHolder" type="HBoxContainer" parent="FightUI/TurnOrder"]
layout_mode = 0
offset_left = 16.0
offset_right = 624.0
offset_bottom = 64.0
size_flags_vertical = 4
script = ExtResource("2_0ff21")
iconWidth = 48

[node name="TurnOrderIcon" parent="FightUI/TurnOrder/IconHolder" instance=ExtResource("2_a67i2")]
layout_mode = 2

[node name="TurnOrderIcon2" parent="FightUI/TurnOrder/IconHolder" instance=ExtResource("2_a67i2")]
layout_mode = 2

[node name="DialogPanel" type="Panel" parent="FightUI"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -126.0
offset_bottom = 2.0
grow_horizontal = 2
grow_vertical = 0
theme_override_styles/panel = SubResource("StyleBoxFlat_0ff21")
script = ExtResource("3_70rx3")

[node name="EnemySelector" type="ItemList" parent="FightUI/DialogPanel" node_paths=PackedStringArray("prev")]
visible = false
layout_mode = 0
offset_left = 322.0
offset_top = 16.0
offset_right = 463.0
offset_bottom = 112.0
size_flags_horizontal = 3
focus_mode = 0
focus_behavior_recursive = 1
mouse_filter = 2
theme = ExtResource("4_70rx3")
theme_override_font_sizes/font_size = 20
allow_search = false
script = ExtResource("5_c7kuk")
prev = NodePath("../FightMenu/Abilities")

[node name="FightMenu" type="BoxContainer" parent="FightUI/DialogPanel"]
layout_mode = 0
offset_left = 32.0
offset_top = 16.0
offset_right = 608.0
offset_bottom = 112.0

[node name="Characters" type="ItemList" parent="FightUI/DialogPanel/FightMenu" node_paths=PackedStringArray("abilityMenu", "next")]
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 0
focus_behavior_recursive = 1
mouse_filter = 2
theme = ExtResource("4_70rx3")
theme_override_font_sizes/font_size = 20
allow_search = false
fixed_icon_size = Vector2i(28, 28)
script = ExtResource("5_7np0b")
abilityMenu = NodePath("../Abilities")
next = NodePath("../Abilities")

[node name="Abilities" type="ItemList" parent="FightUI/DialogPanel/FightMenu" node_paths=PackedStringArray("next", "prev")]
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 0
focus_behavior_recursive = 1
mouse_filter = 2
theme = ExtResource("4_70rx3")
theme_override_font_sizes/font_size = 20
allow_search = false
script = ExtResource("6_h4a4a")
next = NodePath("../../EnemySelector")
prev = NodePath("../Characters")

[node name="Inspector" type="ItemList" parent="FightUI/DialogPanel/FightMenu"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 0
focus_behavior_recursive = 1
mouse_filter = 2
theme = ExtResource("4_70rx3")
theme_override_font_sizes/font_size = 20
allow_search = false
fixed_icon_size = Vector2i(28, 28)

[node name="FightBalloon" parent="FightUI/DialogPanel" instance=ExtResource("4_a67i2")]

[node name="KeyComboUI" parent="." instance=ExtResource("4_0sxkw")]
visible = false
top_level = true
